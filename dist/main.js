(()=>{"use strict";var t=function(t,e,r,o,a,n){return{task:t,notes:e,dueDate:r,priority:o,checklist:a,project:n}},e=function(t){let e;e=localStorage.taskArray?JSON.parse(localStorage.taskArray):[],e.push(t),localStorage.taskArray=JSON.stringify(e)},r=function(t){let e=JSON.parse(localStorage.taskArray),r=e.findIndex((e=>e.task===t.task&&e.notes===t.notes&&e.dueDate===t.dueDate&&e.priority===t.priority&&e.checklist===t.checklist&&e.project===t.project));e.splice(r,1),localStorage.taskArray=JSON.stringify(e)},o=function(t,e,r,o,a,n,c){let l=JSON.parse(localStorage.taskArray),s=l.findIndex((e=>e.task===t.task&&e.notes===t.notes&&e.dueDate===t.dueDate&&e.priority===t.priority&&e.checklist===t.checklist&&e.project===t.project));l[s].task=e,l[s].notes=r,l[s].dueDate=o,l[s].priority=a,l[s].checklist=n,l[s].project=c,localStorage.taskArray=JSON.stringify(l)},a=function(){let n=!1;const c=document.querySelector("#add");return c.addEventListener("click",(()=>{n?(document.querySelector("#my-form").style.display="none",c.textContent="+"):(document.querySelector("#my-form").style.display="block",c.textContent="–"),n=!n})),document.querySelector("#newtodo").addEventListener("click",(()=>{let r=document.getElementById("task").value,o=document.getElementById("notes").value,n=document.getElementById("duedate").value,c=document.getElementById("priority").value,l=document.getElementById("checklist").value,s=document.getElementById("project").value;e(t(r,o,n,c,l,s)),a.clearDOM(),a.pagePopulate(a.sortTaskArray(JSON.parse(localStorage.taskArray))),document.querySelector("#my-form").style.display="none"})),{clearDOM:function(){const t=document.querySelector("#tasklist"),e=document.querySelector("#projlist");for(;t.firstChild;)t.removeChild(t.firstChild);for(t.innerHTML+="<h1>Checklist ✅</h1>";e.firstChild;)e.removeChild(e.firstChild)},sortTaskArray:function(t){return t.sort((function(t,e){return t.project>e.project?1:-1}))},buildProjectArray:function(t){let e=[];return t.forEach((t=>{e.includes(t.project)||e.push(t.project)})),e.sort((function(t,e){return t>e?1:-1}))},pagePopulate:function(t){const e=document.querySelector("#tasklist"),n=document.querySelector("#projlist");let c=a.buildProjectArray(t);c.forEach((n=>{const c=document.createElement("h2");c.textContent=n,e.appendChild(c),t.filter((t=>t.project===n)).forEach((t=>(t=>{const n=document.createElement("div");n.classList.add("taskBox");const c=document.createElement("h4");c.textContent=t.task,n.appendChild(c);const l=document.createElement("div");l.classList.add("taskDetails"),n.appendChild(l);const s=document.createElement("p");s.textContent=t.notes,s.classList.add("notes"),l.appendChild(s),s.addEventListener("click",(()=>{var t=document.createElement("textarea");t.textContent=s.textContent,s.replaceWith(t),t.focus(),t.addEventListener("blur",(t=>{console.log("tis blurred!!"),console.log(t.target)}))}));const d=document.createElement("p");d.textContent=t.dueDate,d.classList.add("dueDate"),l.appendChild(d);const i=document.createElement("p");i.textContent=t.priority,i.classList.add("priority"),l.appendChild(i);const u=document.createElement("p");u.textContent=t.checklist,u.classList.add("checklist"),l.appendChild(u);const p=document.createElement("button");p.textContent="Delete",p.addEventListener("click",(()=>{r(t),a.clearDOM(),a.pagePopulate(a.sortTaskArray(JSON.parse(localStorage.taskArray)))})),n.appendChild(p);const y=document.createElement("button");y.textContent="Expand";let m=!1;y.addEventListener("click",(t=>{m?(t.target.parentNode.querySelector(".taskDetails").style.display="none",y.textContent="Expand"):(t.target.parentNode.querySelector(".taskDetails").style.display="block",y.textContent="Collapse"),m=!m})),n.appendChild(y);const k=document.createElement("button");k.textContent="Edit",k.addEventListener("click",(()=>{o(t),a.clearDOM(),a.pagePopulate(a.sortTaskArray(JSON.parse(localStorage.taskArray)))})),n.appendChild(k),e.appendChild(n)})(t)))})),c.forEach((t=>{const e=document.createElement("h4");e.textContent=t,n.appendChild(e)}))}}}();localStorage.taskArray&&(console.table(JSON.parse(localStorage.taskArray)),a.pagePopulate(JSON.parse(localStorage.taskArray)))})();