(()=>{"use strict";var t=function(t,e,r,a,o,n){return{task:t,notes:e,dueDate:r,priority:a,checklist:o,project:n}},e=function(t){let e;e=localStorage.taskArray?JSON.parse(localStorage.taskArray):[],e.push(t),localStorage.taskArray=JSON.stringify(e)},r=function(t){let e=JSON.parse(localStorage.taskArray),r=e.findIndex((e=>e.task===t.task&&e.notes===t.notes&&e.dueDate===t.dueDate&&e.priority===t.priority&&e.checklist===t.checklist&&e.project===t.project));e.splice(r,1),localStorage.taskArray=JSON.stringify(e)},a=function(t,e,r,a,o,n,c){let l=JSON.parse(localStorage.taskArray),s=l.findIndex((e=>e.task===t.task&&e.notes===t.notes&&e.dueDate===t.dueDate&&e.priority===t.priority&&e.checklist===t.checklist&&e.project===t.project));l[s].task=e,l[s].notes=r,l[s].dueDate=a,l[s].priority=o,l[s].checklist=n,l[s].project=c,localStorage.taskArray=JSON.stringify(l)},o=function(){let n=!1;const c=document.querySelector("#add");return c.addEventListener("click",(()=>{n?(document.querySelector("#my-form").style.display="none",c.textContent="+"):(document.querySelector("#my-form").style.display="block",c.textContent="–"),n=!n})),document.querySelector("#newtodo").addEventListener("click",(()=>{let r=document.getElementById("task").value,a=document.getElementById("notes").value,n=document.getElementById("duedate").value,c=document.getElementById("priority").value,l=document.getElementById("checklist").value,s=document.getElementById("project").value;e(t(r,a,n,c,l,s)),o.clearDOM(),o.pagePopulate(o.sortTaskArray(JSON.parse(localStorage.taskArray))),document.querySelector("#my-form").style.display="none"})),{clearDOM:function(){const t=document.querySelector("#tasklist"),e=document.querySelector("#projlist");for(;t.firstChild;)t.removeChild(t.firstChild);for(t.innerHTML+="<h1>Checklist ✅</h1>";e.firstChild;)e.removeChild(e.firstChild)},sortTaskArray:function(t){return t.sort((function(t,e){return t.project>e.project?1:-1}))},buildProjectArray:function(t){let e=[];return t.forEach((t=>{e.includes(t.project)||e.push(t.project)})),e.sort((function(t,e){return t>e?1:-1}))},pagePopulate:function(t){const e=document.querySelector("#tasklist"),n=document.querySelector("#projlist");let c=o.buildProjectArray(t);c.forEach((n=>{const c=document.createElement("h2");c.textContent=n,e.appendChild(c),t.filter((t=>t.project===n)).forEach((t=>(t=>{const n=document.createElement("div");n.classList.add("taskBox");const c=document.createElement("h4");c.textContent=t.task,c.classList.add("task"),c.contentEditable="true",c.addEventListener("blur",(e=>{a(t,e.target.textContent,e.target.parentNode.querySelector(".notes").textContent,e.target.parentNode.querySelector(".dueDate").textContent,e.target.parentNode.querySelector(".priority").textContent,e.target.parentNode.querySelector(".checklist").textContent,t.project),o.clearDOM(),o.pagePopulate(o.sortTaskArray(JSON.parse(localStorage.taskArray)))})),n.appendChild(c);const l=document.createElement("div");l.classList.add("taskDetails"),n.appendChild(l);const s=document.createElement("p");s.textContent=t.notes,s.classList.add("notes"),s.contentEditable="true",s.addEventListener("blur",(e=>{a(t,e.target.parentNode.parentNode.querySelector(".task").textContent,e.target.parentNode.querySelector(".notes").textContent,e.target.parentNode.querySelector(".dueDate").textContent,e.target.parentNode.querySelector(".priority").textContent,e.target.parentNode.querySelector(".checklist").textContent,t.project),o.clearDOM(),o.pagePopulate(o.sortTaskArray(JSON.parse(localStorage.taskArray)))})),l.appendChild(s);const d=document.createElement("p");d.textContent=t.dueDate,d.classList.add("dueDate"),d.contentEditable="true",d.addEventListener("blur",(e=>{a(t,e.target.parentNode.parentNode.querySelector(".task").textContent,e.target.parentNode.querySelector(".notes").textContent,e.target.parentNode.querySelector(".dueDate").textContent,e.target.parentNode.querySelector(".priority").textContent,e.target.parentNode.querySelector(".checklist").textContent,t.project),o.clearDOM(),o.pagePopulate(o.sortTaskArray(JSON.parse(localStorage.taskArray)))})),l.appendChild(d);const p=document.createElement("p");p.textContent=t.priority,p.classList.add("priority"),p.contentEditable="true",p.addEventListener("blur",(e=>{a(t,e.target.parentNode.parentNode.querySelector(".task").textContent,e.target.parentNode.querySelector(".notes").textContent,e.target.parentNode.querySelector(".dueDate").textContent,e.target.parentNode.querySelector(".priority").textContent,e.target.parentNode.querySelector(".checklist").textContent,t.project),o.clearDOM(),o.pagePopulate(o.sortTaskArray(JSON.parse(localStorage.taskArray)))})),l.appendChild(p);const i=document.createElement("p");i.textContent=t.checklist,i.classList.add("checklist"),i.contentEditable="true",i.addEventListener("blur",(e=>{a(t,e.target.parentNode.parentNode.querySelector(".task").textContent,e.target.parentNode.querySelector(".notes").textContent,e.target.parentNode.querySelector(".dueDate").textContent,e.target.parentNode.querySelector(".priority").textContent,e.target.parentNode.querySelector(".checklist").textContent,t.project),o.clearDOM(),o.pagePopulate(o.sortTaskArray(JSON.parse(localStorage.taskArray)))})),l.appendChild(i);const u=document.createElement("button");u.textContent="Delete",u.addEventListener("click",(()=>{r(t),o.clearDOM(),o.pagePopulate(o.sortTaskArray(JSON.parse(localStorage.taskArray)))})),n.appendChild(u);const y=document.createElement("button");y.textContent="Expand";let S=!1;y.addEventListener("click",(t=>{S?(t.target.parentNode.querySelector(".taskDetails").style.display="none",y.textContent="Expand"):(t.target.parentNode.querySelector(".taskDetails").style.display="block",y.textContent="Collapse"),S=!S})),n.appendChild(y),e.appendChild(n)})(t)))})),c.forEach((t=>{const e=document.createElement("h4");e.textContent=t,n.appendChild(e)}))}}}();localStorage.taskArray&&(console.table(JSON.parse(localStorage.taskArray)),o.pagePopulate(JSON.parse(localStorage.taskArray)))})();